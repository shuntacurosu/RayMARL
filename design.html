<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ€è¡“è¨­è¨ˆ - é©å¿œå‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ†æ•£å¼·åŒ–å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ </title>
    
    <!-- Mermaid.js -->
    <script src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js"></script>
    
    <!-- Prism.js for syntax highlighting -->
    <link href="https://unpkg.com/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <script src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"></script>
    <script src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --accent-color: #3b82f6;
            --background-color: #ffffff;
            --surface-color: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --border-color: #e2e8f0;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }

        [data-theme="dark"] {
            --primary-color: #3b82f6;
            --secondary-color: #2563eb;
            --accent-color: #60a5fa;
            --background-color: #0f172a;
            --surface-color: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --border-color: #334155;
            --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background-color);
            transition: all 0.3s ease;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 100%;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 300px;
            background: var(--surface-color);
            border-right: 1px solid var(--border-color);
            position: fixed;
            top: 80px;
            left: 0;
            height: calc(100vh - 80px);
            overflow-y: auto;
            padding: 2rem 1rem;
            z-index: 100;
        }

        .toc {
            position: sticky;
            top: 0;
        }

        .toc h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            margin-bottom: 0.5rem;
        }

        .toc a {
            color: var(--text-secondary);
            text-decoration: none;
            display: block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .toc a:hover {
            background: var(--primary-color);
            color: white;
        }

        .toc .active {
            background: var(--accent-color);
            color: white;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 300px;
            margin-top: 80px;
            padding: 2rem;
            max-width: calc(100vw - 300px);
        }

        .content {
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Typography */
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }

        h2 {
            font-size: 2rem;
            margin: 2rem 0 1rem 0;
            color: var(--secondary-color);
            border-left: 4px solid var(--primary-color);
            padding-left: 1rem;
        }

        h3 {
            font-size: 1.5rem;
            margin: 1.5rem 0 1rem 0;
            color: var(--text-primary);
        }

        h4 {
            font-size: 1.25rem;
            margin: 1rem 0 0.5rem 0;
            color: var(--text-primary);
        }

        p {
            margin-bottom: 1rem;
            color: var(--text-secondary);
        }

        /* Code Blocks */
        pre {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            box-shadow: var(--shadow);
        }

        code {
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 0.9rem;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: var(--surface-color);
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: var(--background-color);
        }

        /* Mermaid Diagrams */
        .mermaid {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
            box-shadow: var(--shadow);
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }

        li {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        /* Collapsible Sections */
        .collapsible {
            background: var(--surface-color);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            margin: 1rem 0;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .collapsible-header {
            background: var(--background-color);
            padding: 1rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .collapsible-header:hover {
            background: var(--primary-color);
            color: white;
        }

        .collapsible-content {
            padding: 1rem;
            display: none;
        }

        .collapsible.active .collapsible-content {
            display: block;
        }

        .collapsible-arrow {
            transition: transform 0.3s ease;
        }

        .collapsible.active .collapsible-arrow {
            transform: rotate(180deg);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                max-width: 100vw;
            }

            .header-content {
                padding: 0 1rem;
            }

            .menu-toggle {
                display: block;
                background: none;
                border: none;
                color: var(--text-primary);
                font-size: 1.5rem;
                cursor: pointer;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }
        }

        .menu-toggle {
            display: none;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Section spacing */
        .section {
            margin-bottom: 3rem;
        }

        /* Highlight boxes */
        .highlight-box {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin: 1.5rem 0;
            box-shadow: var(--shadow-lg);
        }

        .highlight-box h3 {
            color: white;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <button class="menu-toggle" onclick="toggleSidebar()">â˜°</button>
            <a href="#" class="logo">é©å¿œå‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ†æ•£å¼·åŒ–å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ </a>
            <button class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</button>
        </div>
    </div>

    <div class="container">
        <nav class="sidebar" id="sidebar">
            <div class="toc">
                <h3>ç›®æ¬¡</h3>
                <ul>
                    <li><a href="#overview">æ¦‚è¦</a></li>
                    <li><a href="#requirements-mapping">è¦ä»¶ãƒãƒƒãƒ”ãƒ³ã‚°</a></li>
                    <li><a href="#architecture">ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</a></li>
                    <li><a href="#dataflow">ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</a></li>
                    <li><a href="#components">ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</a></li>
                    <li><a href="#data-model">ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«</a></li>
                    <li><a href="#error-handling">ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</a></li>
                    <li><a href="#security">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …</a></li>
                    <li><a href="#performance">ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£</a></li>
                    <li><a href="#testing">ãƒ†ã‚¹ãƒˆæˆ¦ç•¥</a></li>
                </ul>
            </div>
        </nav>

        <main class="main-content">
            <div class="content">
                <h1 id="top">æŠ€è¡“è¨­è¨ˆ</h1>

                <section id="overview" class="section">
                    <h2>æ¦‚è¦</h2>
                    <div class="highlight-box">
                        <p>é©å¿œå‹ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåˆ†æ•£å¼·åŒ–å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ ã¯ã€Rayãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’åŸºç›¤ã¨ã—ãŸç’°å¢ƒéä¾å­˜ã®ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ãªå­¦ç¿’ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚å‹•çš„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿å“è³ªæ¤œè¨¼ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å­¦ç¿’ãƒ‡ãƒ¼ã‚¿è“„ç©æ©Ÿèƒ½ã‚’çµ±åˆã—ã€Parameter Server ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨Actor-Learneråˆ†æ•£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚ŠåŠ¹ç‡çš„ãªåˆ†æ•£å­¦ç¿’ã‚’å®Ÿç¾ã—ã¾ã™ã€‚</p>
                    </div>
                </section>

                <section id="requirements-mapping" class="section">
                    <h2>è¦ä»¶ãƒãƒƒãƒ”ãƒ³ã‚°</h2>
                    
                    <h3>è¨­è¨ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£</h3>
                    <p>å„è¨­è¨ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ç‰¹å®šã®è¦ä»¶ã«å¯¾å¿œã—ã¾ã™ï¼š</p>
                    <ul>
                        <li><strong>AgentManager</strong> â†’ REQ-1: å‹•çš„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </li>
                        <li><strong>EnvironmentAdapter</strong> â†’ REQ-2: ç’°å¢ƒéä¾å­˜ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</li>
                        <li><strong>DataValidator</strong> â†’ REQ-3: å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ </li>
                        <li><strong>OfflineDataCollector</strong> â†’ REQ-4: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å­¦ç¿’ãƒ‡ãƒ¼ã‚¿è“„ç©æ©Ÿèƒ½</li>
                        <li><strong>DistributedCoordinator</strong> â†’ REQ-5: åˆ†æ•£å­¦ç¿’å”èª¿ã‚·ã‚¹ãƒ†ãƒ </li>
                        <li><strong>MetricsMonitor</strong> â†’ REQ-6: æ€§èƒ½ç›£è¦–ãƒ»è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ </li>
                    </ul>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚«ãƒãƒ¬ãƒƒã‚¸</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <p>è¦ä»¶æ›¸ã®ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã«å¯¾å¿œï¼š</p>
                            <ul>
                                <li><strong>ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…</strong>: AgentManagerã«ã‚ˆã‚‹å‹•çš„ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°æ©Ÿèƒ½</li>
                                <li><strong>ç ”ç©¶è€…</strong>: EnvironmentAdapterã«ã‚ˆã‚‹ç’°å¢ƒéä¾å­˜å®Ÿé¨“ç’°å¢ƒ</li>
                                <li><strong>ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆ</strong>: DataValidatorã«ã‚ˆã‚‹è‡ªå‹•ãƒ‡ãƒ¼ã‚¿å“è³ªæ¤œè¨¼</li>
                                <li><strong>æ©Ÿæ¢°å­¦ç¿’ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</strong>: OfflineDataCollectorã«ã‚ˆã‚‹ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å­¦ç¿’æ”¯æ´</li>
                                <li><strong>ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆ</strong>: DistributedCoordinatorã«ã‚ˆã‚‹å¤§è¦æ¨¡åˆ†æ•£å­¦ç¿’</li>
                                <li><strong>é‹ç”¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢</strong>: MetricsMonitorã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="architecture" class="section">
                    <h2>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h2>
                    
                    <h3>é«˜æ¬¡ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h3>
                    <div class="mermaid">
                        graph TB
                            A[Control Interface] --> B[Agent Manager]
                            B --> C[Distributed Coordinator] 
                            C --> D[Parameter Server]
                            D --> E[DQN Agents]
                            E --> F[Environment Adapter]
                            F --> G[Data Validator]
                            G --> H[Experience Buffer]
                            H --> I[Offline Data Collector]
                            J[Metrics Monitor] --> C
                            J --> K[Ray Dashboard]
                            L[TensorBoard] --> J
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <p>ç ”ç©¶çµæœã¨è¦ä»¶åˆ†æã«åŸºã¥ãæŠ€è¡“é¸æŠï¼š</p>
                            <ul>
                                <li><strong>åˆ†æ•£ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</strong>: Ray 2.0+ (Parameter Serverã€Actor remoting)</li>
                                <li><strong>æ·±å±¤å­¦ç¿’</strong>: PyTorch (DQNå®Ÿè£…ã€GPUæœ€é©åŒ–)</li>
                                <li><strong>ç’°å¢ƒã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</strong>: Gymnasium + PettingZoo (æ¨™æº–åŒ–ã•ã‚ŒãŸRLç’°å¢ƒ)</li>
                                <li><strong>ãƒ‡ãƒ¼ã‚¿å‡¦ç†</strong>: NumPy + Pandas (æ•°å€¤è¨ˆç®—ã€ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†)</li>
                                <li><strong>è¨­å®šç®¡ç†</strong>: Hydra + YAML (éšå±¤çš„è¨­å®šç®¡ç†)</li>
                                <li><strong>ç›£è¦–</strong>: Ray Dashboard + TensorBoard (åˆ†æ•£å®Ÿè¡Œç›£è¦–ã€å­¦ç¿’å¯è¦–åŒ–)</li>
                                <li><strong>ãƒ†ã‚¹ãƒˆ</strong>: pytest + Ray Test Utils (åˆ†æ•£ç’°å¢ƒãƒ†ã‚¹ãƒˆ)</li>
                                <li><strong>ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³</strong>: Ray Object Store (ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼å…±æœ‰ãƒ¡ãƒ¢ãƒª)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®šæ ¹æ‹ </h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <p>ç ”ç©¶ã«åŸºã¥ãä¸»è¦æŠ€è¡“é¸æŠã®ç†ç”±ï¼š</p>
                            <ul>
                                <li><strong>Ray Frameworkæ¡ç”¨ç†ç”±</strong>: 2024å¹´ç ”ç©¶ã§è¨¼æ˜ã•ã‚ŒãŸéšå±¤çš„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒªãƒ³ã‚°ã€ãƒã‚¤ãƒ†ã‚£ãƒ–MARLæ”¯æ´ã€çµ±åˆã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ä¸¦åˆ—ãƒ»ã‚¢ã‚¯ã‚¿ãƒ¼æŠ½è±¡åŒ–</li>
                                <li><strong>Parameter Server ãƒ‘ã‚¿ãƒ¼ãƒ³</strong>: åˆ†æ•£RLã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€éåŒæœŸå­¦ç¿’ã¨åŒæœŸå­¦ç¿’ã®æŸ”è»Ÿãªåˆ‡ã‚Šæ›¿ãˆå¯¾å¿œ</li>
                                <li><strong>PyTorché¸æŠ</strong>: å‹•çš„ã‚°ãƒ©ãƒ•ã€ç ”ç©¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã®æ”¯é…çš„åœ°ä½ã€Rayã¨ã®ãƒã‚¤ãƒ†ã‚£ãƒ–çµ±åˆ</li>
                                <li><strong>Experience Replayåˆ†æ•£åŒ–</strong>: 2024å¹´ç ”ç©¶ã«ã‚ˆã‚‹å„ªå…ˆåº¦ä»˜ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã®å®‰å®šæ€§å‘ä¸Šã€ãƒ¡ãƒ¢ãƒªåŠ¹ç‡æ€§ã®å®Ÿè¨¼</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="dataflow" class="section">
                    <h2>ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼</h2>
                    
                    <h3>ä¸»è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼</h3>
                    <p>ä¸Šä½3ã¤ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼š</p>

                    <h4>1. å‹•çš„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ ãƒ•ãƒ­ãƒ¼</h4>
                    <div class="mermaid">
                        sequenceDiagram
                            participant User
                            participant AgentManager
                            participant Ray
                            participant ParameterServer
                            participant NewAgent
                            
                            User->>AgentManager: add_agent_request()
                            AgentManager->>Ray: create_remote_actor()
                            Ray-->>AgentManager: agent_actor_handle
                            AgentManager->>ParameterServer: register_agent()
                            ParameterServer->>NewAgent: sync_parameters()
                            NewAgent-->>AgentManager: ready_signal
                            AgentManager-->>User: agent added successfully
                    </div>

                    <h4>2. å­¦ç¿’ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ»è“„ç©ãƒ•ãƒ­ãƒ¼</h4>
                    <div class="mermaid">
                        sequenceDiagram
                            participant Agent
                            participant Environment
                            participant DataValidator
                            participant ExperienceBuffer
                            participant OfflineCollector
                            
                            Agent->>Environment: execute_action()
                            Environment-->>Agent: state, reward, done
                            Agent->>DataValidator: validate_experience()
                            DataValidator-->>Agent: validation_result
                            alt data_valid
                                Agent->>ExperienceBuffer: store_experience()
                                ExperienceBuffer->>OfflineCollector: collect_if_offline_mode()
                            else data_invalid  
                                Agent->>DataValidator: log_invalid_data()
                            end
                    </div>

                    <h4>3. åˆ†æ•£å­¦ç¿’å”èª¿ãƒ•ãƒ­ãƒ¼</h4>
                    <div class="mermaid">
                        sequenceDiagram
                            participant Agents
                            participant ExperienceBuffer
                            participant ParameterServer
                            participant MetricsMonitor
                            
                            loop Training Iteration
                                Agents->>ExperienceBuffer: collect_experiences()
                                ExperienceBuffer->>ParameterServer: sample_batch()
                                ParameterServer->>ParameterServer: compute_gradients()
                                ParameterServer->>Agents: broadcast_parameters()
                                ParameterServer->>MetricsMonitor: report_metrics()
                            end
                    </div>
                </section>

                <section id="components" class="section">
                    <h2>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</h2>
                    
                    <h3>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã‚·ã‚°ãƒãƒãƒ£</h3>
                    
<pre><code class="language-python">class AgentManager:
    def add_agent(self, agent_config: AgentConfig) -> str:  # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ ã€IDã‚’è¿”ã™
    def remove_agent(self, agent_id: str) -> bool:         # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®‰å…¨å‰Šé™¤
    def scale_agents(self, target_count: int) -> List[str]: # æŒ‡å®šæ•°ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
    def get_agent_status(self) -> Dict[str, AgentStatus]:   # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹å–å¾—

class EnvironmentAdapter:
    def register_environment(self, env_spec: EnvSpec) -> bool:     # ç’°å¢ƒç™»éŒ²
    def create_environment(self, env_name: str) -> Environment:    # ç’°å¢ƒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä½œæˆ
    def normalize_observation(self, obs: Any) -> np.ndarray:       # è¦³æ¸¬å€¤æ­£è¦åŒ–
    def normalize_action_space(self, action_space: Any) -> ActionSpace: # è¡Œå‹•ç©ºé–“æ­£è¦åŒ–

class DataValidator:
    def validate_experience(self, experience: Experience) -> ValidationResult: # çµŒé¨“ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
    def detect_outliers(self, data: np.ndarray) -> List[int]:                # ç•°å¸¸å€¤æ¤œå‡º
    def check_consistency(self, multi_agent_data: Dict) -> ConsistencyReport: # æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
    def apply_constraints(self, state_sequence: List) -> bool:                # ç‰©ç†åˆ¶ç´„ãƒã‚§ãƒƒã‚¯

class DistributedCoordinator:
    def initialize_cluster(self, cluster_config: ClusterConfig) -> bool:      # ã‚¯ãƒ©ã‚¹ã‚¿åˆæœŸåŒ–
    def coordinate_learning(self, agents: List[Agent]) -> None:               # å­¦ç¿’å”èª¿
    def handle_worker_failure(self, failed_worker_id: str) -> bool:           # éšœå®³å‡¦ç†
    def balance_workload(self, current_load: Dict) -> RebalanceAction:        # è² è·åˆ†æ•£

class OfflineDataCollector:
    def enable_offline_mode(self, config: OfflineConfig) -> bool:             # ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
    def collect_external_actions(self, action_source: ActionSource) -> int:   # å¤–éƒ¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³åé›†
    def generate_statistics(self, data_range: TimeRange) -> StatisticsReport: # çµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    def archive_old_data(self, retention_policy: RetentionPolicy) -> int:     # å¤ã„ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
</code></pre>

                    <h3>APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Method</th>
                                <th>Route</th>
                                <th>Purpose</th>
                                <th>Auth</th>
                                <th>Status Codes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>POST</td>
                                <td>/api/agents</td>
                                <td>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ </td>
                                <td>Required</td>
                                <td>201, 400, 401, 500</td>
                            </tr>
                            <tr>
                                <td>DELETE</td>
                                <td>/api/agents/:id</td>
                                <td>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‰Šé™¤</td>
                                <td>Required</td>
                                <td>204, 401, 404, 500</td>
                            </tr>
                            <tr>
                                <td>GET</td>
                                <td>/api/agents/status</td>
                                <td>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹å–å¾—</td>
                                <td>Required</td>
                                <td>200, 401, 500</td>
                            </tr>
                            <tr>
                                <td>POST</td>
                                <td>/api/environments</td>
                                <td>ç’°å¢ƒç™»éŒ²</td>
                                <td>Required</td>
                                <td>201, 400, 401, 500</td>
                            </tr>
                            <tr>
                                <td>GET</td>
                                <td>/api/metrics</td>
                                <td>æ€§èƒ½ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—</td>
                                <td>Required</td>
                                <td>200, 401, 500</td>
                            </tr>
                            <tr>
                                <td>POST</td>
                                <td>/api/offline/enable</td>
                                <td>ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–</td>
                                <td>Required</td>
                                <td>200, 400, 401, 500</td>
                            </tr>
                            <tr>
                                <td>GET</td>
                                <td>/api/validation/report</td>
                                <td>ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆ</td>
                                <td>Required</td>
                                <td>200, 401, 500</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <section id="data-model" class="section">
                    <h2>ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«</h2>
                    
                    <h3>ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£</h3>
                    <ol>
                        <li><strong>Agent</strong>: å€‹åˆ¥ã®å­¦ç¿’ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆDQNãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€çŠ¶æ…‹ã€è¨­å®šï¼‰</li>
                        <li><strong>Environment</strong>: å­¦ç¿’ç’°å¢ƒï¼ˆGym/PettingZoo ãƒ©ãƒƒãƒ‘ãƒ¼ã€çŠ¶æ…‹ç©ºé–“ã€è¡Œå‹•ç©ºé–“ï¼‰</li>
                        <li><strong>Experience</strong>: å­¦ç¿’çµŒé¨“ï¼ˆçŠ¶æ…‹ã€è¡Œå‹•ã€å ±é…¬ã€æ¬¡çŠ¶æ…‹ã€çµ‚äº†ãƒ•ãƒ©ã‚°ï¼‰</li>
                        <li><strong>ExperienceBuffer</strong>: çµŒé¨“ãƒªãƒ—ãƒ¬ã‚¤ãƒãƒƒãƒ•ã‚¡ï¼ˆå„ªå…ˆåº¦ä»˜ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å¯¾å¿œï¼‰</li>
                        <li><strong>ValidationResult</strong>: ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼çµæœï¼ˆå¦¥å½“æ€§ã€ç•°å¸¸å€¤ã€å“è³ªã‚¹ã‚³ã‚¢ï¼‰</li>
                    </ol>

                    <h3>ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–¢ä¿‚å›³</h3>
                    <div class="mermaid">
                        erDiagram
                            AGENT ||--o{ EXPERIENCE : "generates"
                            ENVIRONMENT ||--o{ EXPERIENCE : "produces"
                            EXPERIENCE_BUFFER ||--|{ EXPERIENCE : "stores"
                            AGENT ||--|| DQN_NETWORK : "has"
                            VALIDATION_RESULT ||--|| EXPERIENCE : "validates"
                            PARAMETER_SERVER ||--o{ AGENT : "coordinates"
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
<pre><code class="language-python">@dataclass
class Agent:
    id: str
    network: DQNNetwork
    target_network: DQNNetwork
    optimizer: torch.optim.Optimizer
    config: AgentConfig
    status: AgentStatus
    created_at: datetime
    last_updated: datetime

@dataclass 
class Experience:
    state: np.ndarray
    action: int
    reward: float  
    next_state: np.ndarray
    done: bool
    agent_id: str
    timestamp: datetime
    priority: float = 1.0
    
@dataclass
class ValidationResult:
    is_valid: bool
    quality_score: float
    anomaly_flags: List[str]
    constraint_violations: List[str]
    validated_at: datetime

@dataclass
class EnvironmentSpec:
    name: str
    observation_space: Any
    action_space: Any
    max_episode_steps: int
    wrapper_config: Dict[str, Any]
    registered_at: datetime
</code></pre>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <p>Ray Object Store + SQLite ã«ã‚ˆã‚‹æ°¸ç¶šåŒ–ï¼š</p>
<pre><code class="language-sql">-- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE agents (
    id TEXT PRIMARY KEY,
    config JSON,
    status TEXT,
    network_checkpoints TEXT,
    created_at TIMESTAMP,
    last_updated TIMESTAMP
);

-- ç’°å¢ƒç™»éŒ²ãƒ†ãƒ¼ãƒ–ãƒ«  
CREATE TABLE environments (
    name TEXT PRIMARY KEY,
    spec JSON,
    adapter_class TEXT,
    registered_at TIMESTAMP
);

-- æ¤œè¨¼ãƒ­ã‚°ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE validation_logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    experience_hash TEXT,
    validation_result JSON,
    validated_at TIMESTAMP
);
</code></pre>
                        </div>
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <ul>
                                <li><strong>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</strong>: Alembic ã«ã‚ˆã‚‹ ã‚¹ã‚­ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†</li>
                                <li><strong>å¾Œæ–¹äº’æ›æ€§</strong>: å¤ã„Experienceå½¢å¼ã®è‡ªå‹•å¤‰æ›</li>
                                <li><strong>ãƒ‡ãƒ¼ã‚¿å¤‰æ›</strong>: ãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚‹å¤§å®¹é‡ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ</li>
                                <li><strong>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥</strong>: timestamp, agent_id ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="error-handling" class="section">
                    <h2>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</h2>
                    
                    <h3>éšå±¤çš„ã‚¨ãƒ©ãƒ¼å‡¦ç†æˆ¦ç•¥</h3>
                    <ol>
                        <li><strong>Ray Level</strong>: ActorException, WorkerFailure ã®æ•æ‰ã¨å†è©¦è¡Œ</li>
                        <li><strong>Component Level</strong>: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›ºæœ‰ã®ä¾‹å¤–å®šç¾©ã¨å‡¦ç†</li>
                        <li><strong>Application Level</strong>: ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ã«ã‚ˆã‚‹çµ±åˆçš„å‡¦ç†</li>
                        <li><strong>User Level</strong>: åˆ†ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨å¾©æ—§ææ¡ˆ</li>
                    </ol>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ã‚«ã‚¹ã‚¿ãƒ ä¾‹å¤–éšå±¤</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
<pre><code class="language-python">class AdaptiveMAException(Exception):
    """åŸºåº•ä¾‹å¤–ã‚¯ãƒ©ã‚¹"""
    pass

class AgentManagementError(AdaptiveMAException):
    """ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†é–¢é€£ã‚¨ãƒ©ãƒ¼"""
    pass

class EnvironmentAdapterError(AdaptiveMAException):
    """ç’°å¢ƒã‚¢ãƒ€ãƒ—ã‚¿é–¢é€£ã‚¨ãƒ©ãƒ¼"""
    pass

class DataValidationError(AdaptiveMAException):
    """ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼é–¢é€£ã‚¨ãƒ©ãƒ¼"""
    pass

class DistributedCoordinationError(AdaptiveMAException):
    """åˆ†æ•£å”èª¿é–¢é€£ã‚¨ãƒ©ãƒ¼"""
    pass
</code></pre>
                        </div>
                    </div>
                </section>

                <section id="security" class="section">
                    <h2>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …</h2>
                    
                    <h3>èªè¨¼ãƒ»èªå¯</h3>
                    <p>Ray Clusterã®èªè¨¼æ©Ÿèƒ½æ´»ç”¨ï¼š</p>
                    <div class="mermaid">
                        sequenceDiagram
                            participant Client
                            participant AuthService
                            participant RayCluster
                            participant Agent
                            
                            Client->>AuthService: authenticate(credentials)
                            AuthService-->>Client: jwt_token
                            Client->>RayCluster: connect(jwt_token)
                            RayCluster->>Agent: authorized_request()
                    </div>

                    <h3>èªå¯ãƒãƒˆãƒªã‚¯ã‚¹</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Role</th>
                                <th>Agent Management</th>
                                <th>Environment Config</th>
                                <th>Data Access</th>
                                <th>System Admin</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Administrator</td>
                                <td>Full</td>
                                <td>Full</td>
                                <td>Full</td>
                                <td>Full</td>
                            </tr>
                            <tr>
                                <td>Researcher</td>
                                <td>Read</td>
                                <td>Full</td>
                                <td>Read</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td>Data Scientist</td>
                                <td>Read</td>
                                <td>Read</td>
                                <td>Full</td>
                                <td>None</td>
                            </tr>
                            <tr>
                                <td>Observer</td>
                                <td>Read</td>
                                <td>Read</td>
                                <td>Read</td>
                                <td>None</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <ul>
                                <li><strong>ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æˆ¦ç•¥</strong>
                                    <ul>
                                        <li>JWT Token: ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹èªè¨¼ã€æœ‰åŠ¹æœŸé™ç®¡ç†</li>
                                        <li>Ray Security: ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¬ãƒ™ãƒ«ã®èªè¨¼ãƒ»æš—å·åŒ–</li>
                                        <li>ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–: Redis ã«ã‚ˆã‚‹åˆ†æ•£ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†</li>
                                    </ul>
                                </li>
                                <li><strong>ãƒ‡ãƒ¼ã‚¿ä¿è­·</strong>
                                    <ul>
                                        <li>å…¥åŠ›æ¤œè¨¼: Pydantic ã«ã‚ˆã‚‹å³å¯†ãªã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼</li>
                                        <li>æš—å·åŒ–: Ray TLS ã«ã‚ˆã‚‹é€šä¿¡æš—å·åŒ–ã€ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã®AESæš—å·åŒ–</li>
                                        <li>æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿å‡¦ç†: ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹èªè¨¼æƒ…å ±ç®¡ç†ã€ãƒ­ã‚°ã‹ã‚‰ã®æ©Ÿå¯†æƒ…å ±é™¤å¤–</li>
                                    </ul>
                                </li>
                                <li><strong>OWASPå¯¾ç­–</strong>: å…¥åŠ›æ¤œè¨¼ã€SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³é˜²æ­¢ã€XSSå¯¾ç­–</li>
                                <li><strong>API Rate Limiting</strong>: Ray Actor ãƒ¬ãƒ™ãƒ«ã§ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ¶é™</li>
                                <li><strong>CORSè¨­å®š</strong>: é–‹ç™ºãƒ»æœ¬ç•ªç’°å¢ƒã§ã®é©åˆ‡ãªã‚ªãƒªã‚¸ãƒ³åˆ¶é™</li>
                                <li><strong>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€</strong>: HSTS, CSP, X-Frame-Options ã®å®Ÿè£…</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="performance" class="section">
                    <h2>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£</h2>
                    
                    <h3>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>ãƒ¡ãƒˆãƒªã‚¯ã‚¹</th>
                                <th>ç›®æ¨™å€¤</th>
                                <th>æ¸¬å®šæ–¹æ³•</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ æ™‚é–“(p95)</td>
                                <td>&lt; 2ç§’</td>
                                <td>Agent Management API</td>
                            </tr>
                            <tr>
                                <td>Experienceå‡¦ç†æ™‚é–“(p99)</td>
                                <td>&lt; 10ms</td>
                                <td>Data Pipelineç›£è¦–</td>
                            </tr>
                            <tr>
                                <td>å­¦ç¿’æ›´æ–°é »åº¦</td>
                                <td>&gt; 100 updates/sec</td>
                                <td>Parameter Serverç›£è¦–</td>
                            </tr>
                            <tr>
                                <td>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª(p99)</td>
                                <td>&lt; 50ms</td>
                                <td>SQLiteã‚¯ã‚¨ãƒªç›£è¦–</td>
                            </tr>
                            <tr>
                                <td>åŒæ™‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ•°</td>
                                <td>&gt; 1000 agents</td>
                                <td>ã‚·ã‚¹ãƒ†ãƒ å®¹é‡ãƒ†ã‚¹ãƒˆ</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>æœ€é©åŒ–æˆ¦ç•¥</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <h4>ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥</h4>
                            <ul>
                                <li><strong>Ray Object Store</strong>: Experience Buffer ã®å…±æœ‰ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥</li>
                                <li><strong>Parameter Cache</strong>: é »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹ãƒ¢ãƒ‡ãƒ«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</li>
                                <li><strong>Environment Cache</strong>: ç’°å¢ƒã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ ã®å†åˆ©ç”¨ãƒ—ãƒ¼ãƒ«</li>
                                <li><strong>Validation Cache</strong>: ç¹°ã‚Šè¿”ã—æ¤œè¨¼çµæœã®ãƒ¡ãƒ¢åŒ–</li>
                            </ul>

                            <h4>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ</h4>
                            <ul>
                                <li><strong>æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</strong>: Ray Cluster ã®å‹•çš„ãƒãƒ¼ãƒ‰è¿½åŠ </li>
                                <li><strong>å‚ç›´ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</strong>: GPU ãƒ¡ãƒ¢ãƒªã¨ãƒãƒƒãƒã‚µã‚¤ã‚ºæœ€é©åŒ–</li>
                                <li><strong>éåŒæœŸå‡¦ç†</strong>: Ray remote function ã«ã‚ˆã‚‹ä¸¦åˆ—Experienceå‡¦ç†</li>
                                <li><strong>è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</strong>: Cluster Autoscaler ã«ã‚ˆã‚‹è² è·ãƒ™ãƒ¼ã‚¹èª¿æ•´</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="testing" class="section">
                    <h2>ãƒ†ã‚¹ãƒˆæˆ¦ç•¥</h2>
                    
                    <h3>ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸è¦ä»¶</h3>
                    <ul>
                        <li><strong>ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ</strong>: â‰¥85% ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</li>
                        <li><strong>çµ±åˆãƒ†ã‚¹ãƒˆ</strong>: å…¨API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¨ Ray ã‚¢ã‚¯ã‚¿ãƒ¼é€£æº</li>
                        <li><strong>E2Eãƒ†ã‚¹ãƒˆ</strong>: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãªå­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</li>
                        <li><strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</strong>: äºˆæƒ³ãƒ”ãƒ¼ã‚¯è² è·ã®2å€ã§ã®è² è·ãƒ†ã‚¹ãƒˆ</li>
                    </ul>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒè©³ç´°</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <h4>1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ</h4>
                            <ul>
                                <li>å€‹åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ©Ÿèƒ½ã®ç‹¬ç«‹ãƒ†ã‚¹ãƒˆ</li>
                                <li>Ray Remote ã® ãƒ¢ãƒƒã‚¯åŒ–</li>
                                <li>ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®é‡ç‚¹ãƒ†ã‚¹ãƒˆ</li>
                            </ul>

                            <h4>2. çµ±åˆãƒ†ã‚¹ãƒˆ</h4>
                            <ul>
                                <li>Ray Cluster ã§ã®åˆ†æ•£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé€£æºãƒ†ã‚¹ãƒˆ</li>
                                <li>Environment Adapter ã®å®Ÿç’°å¢ƒãƒ†ã‚¹ãƒˆ</li>
                                <li>Experience Buffer ã®ä¸¦è¡Œã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ</li>
                            </ul>

                            <h4>3. End-to-Endãƒ†ã‚¹ãƒˆ</h4>
                            <ul>
                                <li>ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ ã‹ã‚‰å­¦ç¿’å®Œäº†ã¾ã§ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼</li>
                                <li>ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®çµ±åˆãƒ†ã‚¹ãƒˆ</li>
                                <li>éšœå®³å›å¾©ã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ</li>
                            </ul>

                            <h4>4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</h4>
                            <ul>
                                <li>Ray Test Utils ã‚’ä½¿ç”¨ã—ãŸè² è·ãƒ†ã‚¹ãƒˆ</li>
                                <li>å¤§é‡ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã®ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ</li>
                                <li>ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯æ¤œè¨¼ã®ãŸã‚ã®é•·æ™‚é–“ãƒ†ã‚¹ãƒˆ</li>
                            </ul>
                        </div>
                    </div>

                    <h3>CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</h3>
                    <div class="mermaid">
                        graph LR
                            A[Code Push] --> B[Linting & Format]
                            B --> C[Unit Tests]
                            C --> D[Integration Tests]
                            D --> E[Build Docker Image]
                            E --> F[E2E Tests on Ray Cluster]
                            F --> G[Performance Tests]
                            G --> H[Deploy to Staging]
                            H --> I[Production Deployment]
                    </div>

                    <div class="collapsible">
                        <div class="collapsible-header">
                            <h3>ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹æˆ</h3>
                            <span class="collapsible-arrow">â–¼</span>
                        </div>
                        <div class="collapsible-content">
                            <ul>
                                <li><strong>Local</strong>: pytest + Ray local cluster (é–‹ç™ºè€…ç’°å¢ƒ)</li>
                                <li><strong>CI</strong>: GitHub Actions + Ray cluster simulation</li>
                                <li><strong>Staging</strong>: æœ¬ç•ªç›¸å½“ã® Ray Cluster ç’°å¢ƒ</li>
                                <li><strong>Performance</strong>: å°‚ç”¨GPU cluster ã§ã®è² è·ãƒ†ã‚¹ãƒˆç’°å¢ƒ</li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'
        });

        // Theme toggle functionality
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Reinitialize Mermaid with new theme
            mermaid.initialize({
                startOnLoad: true,
                theme: newTheme === 'dark' ? 'dark' : 'default'
            });
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);

        // Mobile sidebar toggle
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('mobile-open');
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('.toc a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // Active navigation highlighting
        function updateActiveNav() {
            const sections = document.querySelectorAll('section[id]');
            const navLinks = document.querySelectorAll('.toc a');
            
            let currentSection = '';
            sections.forEach(section => {
                const rect = section.getBoundingClientRect();
                if (rect.top <= 100 && rect.bottom >= 100) {
                    currentSection = section.id;
                }
            });
            
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentSection}`) {
                    link.classList.add('active');
                }
            });
        }

        // Collapsible sections
        function initCollapsibles() {
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('click', function() {
                    const collapsible = this.parentElement;
                    collapsible.classList.toggle('active');
                });
            });
        }

        // Initialize on load
        window.addEventListener('load', function() {
            updateActiveNav();
            initCollapsibles();
        });

        window.addEventListener('scroll', updateActiveNav);
    </script>
</body>
</html>